//>>built
define("dojo/store/Memory",["../_base/declare","./util/QueryResults","./util/SimpleQueryEngine"],function(e,a,t){var r=null;return e("dojo.store.Memory",r,{constructor:function(e){for(var a in e)this[a]=e[a];this.setData(this.data||[])},data:null,idProperty:"id",index:null,queryEngine:t,get:function(e){return this.data[this.index[e]]},getIdentity:function(e){return e[this.idProperty]},put:function(e,a){var t=this.data,r=this.index,i=this.idProperty,d=e[i]=a&&"id"in a?a.id:i in e?e[i]:Math.random();if(d in r){if(a&&a.overwrite===!1)throw new Error("Object already exists");t[r[d]]=e}else r[d]=t.push(e)-1;return d},add:function(e,a){return(a=a||{}).overwrite=!1,this.put(e,a)},remove:function(e){var a=this.index,t=this.data;return e in a?(t.splice(a[e],1),this.setData(t),!0):void 0},query:function(e,t){return a(this.queryEngine(e,t)(this.data))},setData:function(e){e.items?(this.idProperty=e.identifier||this.idProperty,e=this.data=e.items):this.data=e,this.index={};for(var a=0,t=e.length;t>a;a++)this.index[e[a][this.idProperty]]=a}})});//# sourceMappingURL=Memory.js.map