//>>built
define("dojo/request/util",["exports","../errors/RequestError","../errors/CancelError","../Deferred","../io-query","../_base/array","../_base/lang","../promise/Promise","../has"],function(e,a,t,r,i,d,l,o,n){function m(e){return n("native-arraybuffer")&&e instanceof ArrayBuffer}function s(e){return n("native-blob")&&e instanceof Blob}function f(e){return"undefined"!=typeof HTMLFormElement?e instanceof HTMLFormElement:void("FORM"===e.tagName)}function y(e){return n("native-formdata")&&e instanceof FormData}function u(e){return e&&"object"==typeof e&&!y(e)&&!f(e)&&!s(e)&&!m(e)}function M(e){return h(e)}function v(e){return void 0!==e.data?e.data:e.text}e.deepCopy=function(a,t){for(var r in t){var i=a[r],d=t[r];i!==d&&(u(d)?"[object Date]"===Object.prototype.toString.call(d)?a[r]=new Date(d):l.isArray(d)?a[r]=e.deepCopyArray(d):i&&"object"==typeof i?e.deepCopy(i,d):a[r]=e.deepCopy({},d):a[r]=d)}return a},e.deepCopyArray=function(a){for(var t=[],r=0,i=a.length;i>r;r++){var d=a[r];t.push("object"==typeof d?e.deepCopy({},d):d)}return t},e.deepCreate=function(a,t){t=t||{};var r,i,d=l.delegate(a);for(r in a)i=a[r],i&&"object"==typeof i&&(d[r]=e.deepCreate(i,t[r]));return e.deepCopy(d,t)};var h=Object.freeze||function(e){return e};e.deferred=function(i,d,n,m,s,f){function y(e){throw e.response=i,e}var u=new r(function(e){return d&&d(u,i),e&&(e instanceof a||e instanceof t)?e:new t("Request canceled",i)});u.response=i,u.isValid=n,u.isReady=m,u.handleResponse=s;var c=u.then(M).otherwise(y);e.notify&&c.then(l.hitch(e.notify,"emit","load"),l.hitch(e.notify,"emit","error"));var g=c.then(v),p=new o;for(var b in g)g.hasOwnProperty(b)&&(p[b]=g[b]);return p.response=c,h(p),f&&u.then(function(e){f.call(u,e)},function(e){f.call(u,i,e)}),u.promise=p,u.then=p.then,u},e.addCommonMethods=function(e,a){d.forEach(a||["GET","POST","PUT","DELETE"],function(a){e[("DELETE"===a?"DEL":a).toLowerCase()]=function(t,r){return r=l.delegate(r||{}),r.method=a,e(t,r)}})},e.parseArgs=function(e,a,t){var r=a.data,d=a.query;return r&&!t&&("object"!=typeof r||n("native-xhr2")&&(m(r)||s(r))||(a.data=i.objectToQuery(r))),d?("object"==typeof d&&(d=i.objectToQuery(d)),a.preventCache&&(d+=(d?"&":"")+"request.preventCache="+ +new Date)):a.preventCache&&(d="request.preventCache="+ +new Date),e&&d&&(e+=(~e.indexOf("?")?"&":"?")+d),{url:e,options:a,getHeader:function(){return null}}},e.checkStatus=function(e){return e=e||0,e>=200&&300>e||304===e||1223===e||!e}});//# sourceMappingURL=util.js.map