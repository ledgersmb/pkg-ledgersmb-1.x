//>>built
define("dojo/io/iframe",["../_base/config","../_base/json","../_base/kernel","../_base/lang","../_base/xhr","../sniff","../_base/window","../dom","../dom-construct","../query","require","../aspect","../request/iframe"],function(e,a,t,r,d,i,l,o,n,m,s,f,y){t.deprecated("dojo/io/iframe","Use dojo/request/iframe.","2.0");var u=y._iframeName;u=u.substring(0,u.lastIndexOf("_"));var M=r.delegate(y,{create:function(){return M._frame=y.create.apply(y,arguments)},get:null,post:null,send:function(r){var i,l=d._ioSetArgs(r,function(){i&&i.cancel()},function(e){var r=null,d=e.ioArgs;try{var l=d.handleAs;"xml"===l||"html"===l?r=i.response.data:(r=i.response.text,"json"===l?r=a.fromJson(r):"javascript"===l&&(r=t.eval(r)))}catch(o){r=o}return r},function(e,a){return a.ioArgs._hasError=!0,e}),n=l.ioArgs,m="GET",s=o.byId(r.form);r.method&&"POST"===r.method.toUpperCase()&&s&&(m="POST");var u={method:m,handleAs:"json"===r.handleAs||"javascript"===r.handleAs?"text":r.handleAs,form:r.form,query:s?null:r.content,data:s?r.content:null,timeout:r.timeout,ioArgs:n};if(u.method&&(u.method=u.method.toUpperCase()),e.ioPublish&&t.publish&&n.args.ioPublish!==!1)var M=f.after(y,"_notifyStart",function(e){e.options.ioArgs===n&&(M.remove(),d._ioNotifyStart(l))},!0);return i=y(n.url,u,!0),n._callNext=i._callNext,i.then(function(){l.resolve(l)}).otherwise(function(e){l.ioArgs.error=e,l.reject(e)}),l},_iframeOnload:l.global[u+"_onload"]});return r.setObject("dojo.io.iframe",M),M});//# sourceMappingURL=iframe.js.map