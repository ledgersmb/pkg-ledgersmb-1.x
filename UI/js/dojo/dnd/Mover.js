//>>built
define("dojo/dnd/Mover",["../_base/array","../_base/declare","../_base/lang","../sniff","../_base/window","../dom","../dom-geometry","../dom-style","../Evented","../on","../touch","./common","./autoscroll"],function(e,a,t,r,d,i,l,o,n,m,s,f,y){return a("dojo.dnd.Mover",[n],{constructor:function(e,a,r){function d(e){e.preventDefault(),e.stopPropagation()}this.node=i.byId(e),this.marginBox={l:a.pageX,t:a.pageY},this.mouseButton=a.button;var l=this.host=r,o=e.ownerDocument;this.events=[m(o,s.move,t.hitch(this,"onFirstMove")),m(o,s.move,t.hitch(this,"onMouseMove")),m(o,s.release,t.hitch(this,"onMouseUp")),m(o,"dragstart",d),m(o.body,"selectstart",d)],y.autoScrollStart(o),l&&l.onMoveStart&&l.onMoveStart(this)},onMouseMove:function(e){y.autoScroll(e);var a=this.marginBox;this.host.onMove(this,{l:a.l+e.pageX,t:a.t+e.pageY},e),e.preventDefault(),e.stopPropagation()},onMouseUp:function(e){(r("webkit")&&r("mac")&&2==this.mouseButton?0==e.button:this.mouseButton==e.button)&&this.destroy(),e.preventDefault(),e.stopPropagation()},onFirstMove:function(e){var a,t,r=this.node.style,i=this.host;switch(r.position){case"relative":case"absolute":a=Math.round(parseFloat(r.left))||0,t=Math.round(parseFloat(r.top))||0;break;default:r.position="absolute";var n=l.getMarginBox(this.node),m=d.doc.body,s=o.getComputedStyle(m),f=l.getMarginBox(m,s),y=l.getContentBox(m,s);a=n.l-(y.l-f.l),t=n.t-(y.t-f.t)}this.marginBox.l=a-this.marginBox.l,this.marginBox.t=t-this.marginBox.t,i&&i.onFirstMove&&i.onFirstMove(this,e),this.events.shift().remove()},destroy:function(){e.forEach(this.events,function(e){e.remove()});var a=this.host;a&&a.onMoveStop&&a.onMoveStop(this),this.events=this.node=this.host=null}})});//# sourceMappingURL=Mover.js.map