//>>built
define("dijit/form/_ExpandingTextAreaMixin",["dojo/_base/declare","dojo/dom-construct","dojo/has","dojo/_base/lang","dojo/on","dojo/_base/window","../Viewport"],function(e,t,a,i,r,d,o){return a.add("textarea-needs-help-shrinking",function(){var e=d.body(),a=t.create("textarea",{rows:"5",cols:"20",value:" ",style:{zoom:1,fontSize:"12px",height:"96px",overflow:"hidden",visibility:"hidden",position:"absolute",border:"5px solid white",margin:"0",padding:"0",boxSizing:"border-box",MsBoxSizing:"border-box",WebkitBoxSizing:"border-box",MozBoxSizing:"border-box"}},e,"last"),i=a.scrollHeight>=a.clientHeight;return e.removeChild(a),i}),e("dijit.form._ExpandingTextAreaMixin",null,{_setValueAttr:function(){this.inherited(arguments),this.resize()},postCreate:function(){this.inherited(arguments);var e=this.textbox;e.style.overflowY="hidden",this.own(r(e,"focus, resize",i.hitch(this,"_resizeLater")))},startup:function(){this.inherited(arguments),this.own(o.on("resize",i.hitch(this,"_resizeLater"))),this._resizeLater()},_onInput:function(){this.inherited(arguments),this.resize()},_estimateHeight:function(){var e=this.textbox;e.rows=(e.value.match(/\n/g)||[]).length+1},_resizeLater:function(){this.defer("resize")},resize:function(){function e(){var e=!1;""===t.value&&(t.value=" ",e=!0);var a=t.scrollHeight;return e&&(t.value=""),a}var t=this.textbox;if("hidden"==t.style.overflowY&&(t.scrollTop=0),!this.busyResizing){if(this.busyResizing=!0,e()||t.offsetHeight){var i=e()+Math.max(t.offsetHeight-t.clientHeight,0),r=i+"px";if(r!=t.style.height&&(t.style.height=r,t.rows=1),a("textarea-needs-help-shrinking")){var d,o=e(),n=o,l=t.style.minHeight,s=4,m=t.scrollTop;for(t.style.minHeight=r,t.style.height="auto";i>0;){t.style.minHeight=Math.max(i-s,4)+"px",d=e();var u=n-d;if(i-=u,s>u)break;n=d,s<<=1}t.style.height=i+"px",t.style.minHeight=l,t.scrollTop=m}t.style.overflowY=e()>t.clientHeight?"auto":"hidden","hidden"==t.style.overflowY&&(t.scrollTop=0)}else this._estimateHeight();this.busyResizing=!1}}})});//# sourceMappingURL=_ExpandingTextAreaMixin.js.map