//>>built
define("dijit/layout/ContentPane",["dojo/_base/kernel","dojo/_base/lang","../_Widget","../_Container","./_ContentPaneResizeMixin","dojo/string","dojo/html","dojo/_base/array","dojo/_base/declare","dojo/_base/Deferred","dojo/dom","dojo/dom-attr","dojo/dom-construct","dojo/_base/xhr","dojo/i18n","dojo/when","dojo/i18n!../nls/loading"],function(e,t,a,i,r,d,o,n,l,s,m,u,f,h,y,c){return l("dijit.layout.ContentPane",[a,i,r],{href:"",content:"",extractContent:!1,parseOnLoad:!0,parserScope:e._scopeName,preventCache:!1,preload:!1,refreshOnShow:!1,loadingMessage:"<span class='dijitContentPaneLoading'><span class='dijitInline dijitIconLoading'></span>${loadingState}</span>",errorMessage:"<span class='dijitContentPaneError'><span class='dijitInline dijitIconError'></span>${errorState}</span>",isLoaded:!1,baseClass:"dijitContentPane",ioArgs:{},onLoadDeferred:null,_setTitleAttr:null,stopParser:!0,template:!1,markupFactory:function(e,t,a){var i=new a(e,t);return!i.href&&i._contentSetter&&i._contentSetter.parseDeferred&&!i._contentSetter.parseDeferred.isFulfilled()?i._contentSetter.parseDeferred.then(function(){return i}):i},create:function(e,a){if(!(e&&e.template||!a||"href"in e||"content"in e)){a=m.byId(a);for(var i=a.ownerDocument.createDocumentFragment();a.firstChild;)i.appendChild(a.firstChild);e=t.delegate(e,{content:i})}this.inherited(arguments,[e,a])},postMixInProperties:function(){this.inherited(arguments);var e=y.getLocalization("dijit","loading",this.lang);this.loadingMessage=d.substitute(this.loadingMessage,e),this.errorMessage=d.substitute(this.errorMessage,e)},buildRendering:function(){this.inherited(arguments),this.containerNode||(this.containerNode=this.domNode),this.domNode.removeAttribute("title")},startup:function(){this.inherited(arguments),this._contentSetter&&n.forEach(this._contentSetter.parseResults,function(e){e._started||e._destroyed||!t.isFunction(e.startup)||(e.startup(),e._started=!0)},this)},_startChildren:function(){n.forEach(this.getChildren(),function(e){e._started||e._destroyed||!t.isFunction(e.startup)||(e.startup(),e._started=!0)}),this._contentSetter&&n.forEach(this._contentSetter.parseResults,function(e){e._started||e._destroyed||!t.isFunction(e.startup)||(e.startup(),e._started=!0)},this)},setHref:function(t){return e.deprecated("dijit.layout.ContentPane.setHref() is deprecated. Use set('href', ...) instead.","","2.0"),this.set("href",t)},_setHrefAttr:function(e){return this.cancel(),this.onLoadDeferred=new s(t.hitch(this,"cancel")),this.onLoadDeferred.then(t.hitch(this,"onLoad")),this._set("href",e),this.preload||this._created&&this._isShown()?this._load():this._hrefChanged=!0,this.onLoadDeferred},setContent:function(t){e.deprecated("dijit.layout.ContentPane.setContent() is deprecated.  Use set('content', ...) instead.","","2.0"),this.set("content",t)},_setContentAttr:function(e){return this._set("href",""),this.cancel(),this.onLoadDeferred=new s(t.hitch(this,"cancel")),this._created&&this.onLoadDeferred.then(t.hitch(this,"onLoad")),this._setContent(e||""),this._isDownloaded=!1,this.onLoadDeferred},_getContentAttr:function(){return this.containerNode.innerHTML},cancel:function(){this._xhrDfd&&-1==this._xhrDfd.fired&&this._xhrDfd.cancel(),delete this._xhrDfd,this.onLoadDeferred=null},destroy:function(){this.cancel(),this.inherited(arguments)},destroyRecursive:function(){this._beingDestroyed||this.inherited(arguments)},_onShow:function(){return this.inherited(arguments),!this.href||this._xhrDfd||this.isLoaded&&!this._hrefChanged&&!this.refreshOnShow?void 0:this.refresh()},refresh:function(){return this.cancel(),this.onLoadDeferred=new s(t.hitch(this,"cancel")),this.onLoadDeferred.then(t.hitch(this,"onLoad")),this._load(),this.onLoadDeferred},_load:function(){this._setContent(this.onDownloadStart(),!0);var e=this,a={preventCache:this.preventCache||this.refreshOnShow,url:this.href,handleAs:"text"};t.isObject(this.ioArgs)&&t.mixin(a,this.ioArgs);var i,r=this._xhrDfd=(this.ioMethod||h.get)(a);r.then(function(t){i=t;try{return e._isDownloaded=!0,e._setContent(t,!1)}catch(a){e._onError("Content",a)}},function(t){return r.canceled||e._onError("Download",t),delete e._xhrDfd,t}).then(function(){return e.onDownloadEnd(),delete e._xhrDfd,i}),delete this._hrefChanged},_onLoadHandler:function(e){this._set("isLoaded",!0);try{this.onLoadDeferred.resolve(e)}catch(t){console.error("Error "+(this.widgetId||this.id)+" running custom onLoad code: "+t.message)}},_onUnloadHandler:function(){this._set("isLoaded",!1);try{this.onUnload()}catch(e){console.error("Error "+this.widgetId+" running custom onUnload code: "+e.message)}},destroyDescendants:function(e){this.isLoaded&&this._onUnloadHandler();var t=this._contentSetter;n.forEach(this.getChildren(),function(t){t.destroyRecursive?t.destroyRecursive(e):t.destroy&&t.destroy(e),t._destroyed=!0}),t&&(n.forEach(t.parseResults,function(t){t._destroyed||(t.destroyRecursive?t.destroyRecursive(e):t.destroy&&t.destroy(e),t._destroyed=!0)}),delete t.parseResults),e||f.empty(this.containerNode),delete this._singleChild},_setContent:function(e,a){e=this.preprocessContent(e),this.destroyDescendants();var i=this._contentSetter;i&&i instanceof o._ContentSetter||(i=this._contentSetter=new o._ContentSetter({node:this.containerNode,_onError:t.hitch(this,this._onError),onContentError:t.hitch(this,function(e){var t=this.onContentError(e);try{this.containerNode.innerHTML=t}catch(e){console.error("Fatal "+this.id+" could not change content due to "+e.message,e)}})}));var r=t.mixin({cleanContent:this.cleanContent,extractContent:this.extractContent,parseContent:!e.domNode&&this.parseOnLoad,parserScope:this.parserScope,startup:!1,dir:this.dir,lang:this.lang,textDir:this.textDir},this._contentSetterParams||{}),d=i.set(t.isObject(e)&&e.domNode?e.domNode:e,r),n=this;return c(d&&d.then?d:i.parseDeferred,function(){delete n._contentSetterParams,a||(n._started&&(n._startChildren(),n._scheduleLayout()),n._onLoadHandler(e))})},preprocessContent:function(e){return e},_onError:function(e,t,a){this.onLoadDeferred.reject(t);var i=this["on"+e+"Error"].call(this,t);a?console.error(a,t):i&&this._setContent(i,!0)},onLoad:function(){},onUnload:function(){},onDownloadStart:function(){return this.loadingMessage},onContentError:function(){},onDownloadError:function(){return this.errorMessage},onDownloadEnd:function(){}})});//# sourceMappingURL=ContentPane.js.map