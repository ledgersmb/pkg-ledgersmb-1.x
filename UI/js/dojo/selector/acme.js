//>>built
define("dojo/selector/acme",["../dom","../sniff","../_base/array","../_base/lang","../_base/window"],function(e,a,t,r,i){var d=r.trim,l=t.forEach,o=function(){return i.doc},n="BackCompat"==o().compatMode,m=">~+",s=!1,f=function(){return!0},y=function(e){e+=m.indexOf(e.slice(-1))>=0?" * ":" ";for(var a,t,r=function(a,t){return d(e.slice(a,t))},i=[],l=-1,o=-1,n=-1,f=-1,y=-1,u=-1,M=-1,v="",h="",c=0,g=e.length,p=null,b=null,F=function(){if(M>=0){var e=M==c?null:r(M,c);p[m.indexOf(e)<0?"tag":"oper"]=e,M=-1}},w=function(){u>=0&&(p.id=r(u,c).replace(/\\/g,""),u=-1)},k=function(){y>=0&&(p.classes.push(r(y+1,c).replace(/\\/g,"")),y=-1)},I=function(){w(),F(),k()},E=function(){I(),f>=0&&p.pseudos.push({name:r(f+1,c)}),p.loops=p.pseudos.length||p.attrs.length||p.classes.length,p.oquery=p.query=r(t,c),p.otag=p.tag=p.oper?null:p.tag||"*",p.tag&&(p.tag=p.tag.toUpperCase()),i.length&&i[i.length-1].oper&&(p.infixOper=i.pop(),p.query=p.infixOper.query+" "+p.query),i.push(p),p=null};v=h,h=e.charAt(c),g>c;c++)if("\\"!=v)if(p||(t=c,p={query:null,pseudos:[],attrs:[],classes:[],tag:null,oper:null,id:null,getTag:function(){return s?this.otag:this.tag}},M=c),a)h==a&&(a=null);else if("'"!=h&&'"'!=h)if(l>=0){if("]"==h){b.attr?b.matchFor=r(n||l+1,c):b.attr=r(l+1,c);var G=b.matchFor;G&&('"'==G.charAt(0)||"'"==G.charAt(0))&&(b.matchFor=G.slice(1,-1)),b.matchFor&&(b.matchFor=b.matchFor.replace(/\\/g,"")),p.attrs.push(b),b=null,l=n=-1}else if("="==h){var A="|~^$*".indexOf(v)>=0?v:"";b.type=A+h,b.attr=r(l+1,c-A.length),n=c+1}}else o>=0?")"==h&&(f>=0&&(b.value=r(o+1,c)),f=o=-1):"#"==h?(I(),u=c+1):"."==h?(I(),y=c):":"==h?(I(),f=c):"["==h?(I(),l=c,b={}):"("==h?(f>=0&&(b={name:r(f+1,c),value:null},p.pseudos.push(b)),o=c):" "==h&&v!=h&&E();else a=h;return i},u=function(e,a){return e?a?function(){return e.apply(window,arguments)&&a.apply(window,arguments)}:e:a},M=function(e,a){var t=a||[];return e&&t.push(e),t},v=function(e){return 1==e.nodeType},h="",c=function(e,a){return e?"class"==a?e.className||h:"for"==a?e.htmlFor||h:"style"==a?e.style.cssText||h:(s?e.getAttribute(a):e.getAttribute(a,2))||h:h},g={"*=":function(e,a){return function(t){return c(t,e).indexOf(a)>=0}},"^=":function(e,a){return function(t){return 0==c(t,e).indexOf(a)}},"$=":function(e,a){return function(t){var r=" "+c(t,e),i=r.lastIndexOf(a);return i>-1&&i==r.length-a.length}},"~=":function(e,a){var t=" "+a+" ";return function(a){var r=" "+c(a,e)+" ";return r.indexOf(t)>=0}},"|=":function(e,a){var t=a+"-";return function(r){var i=c(r,e);return i==a||0==i.indexOf(t)}},"=":function(e,a){return function(t){return c(t,e)==a}}},p=o().documentElement,b=!(p.nextElementSibling||"nextElementSibling"in p),F=b?"nextSibling":"nextElementSibling",w=b?"previousSibling":"previousElementSibling",k=b?v:f,I=function(e){for(;e=e[w];)if(k(e))return!1;return!0},E=function(e){for(;e=e[F];)if(k(e))return!1;return!0},G=function(e){var t=e.parentNode;t=7!=t.nodeType?t:t.nextSibling;var r=0,i=t.children||t.childNodes,d=e._i||e.getAttribute("_i")||-1,l=t._l||("undefined"!=typeof t.getAttribute?t.getAttribute("_l"):-1);if(!i)return-1;var o=i.length;if(l==o&&d>=0&&l>=0)return d;a("ie")&&"undefined"!=typeof t.setAttribute?t.setAttribute("_l",o):t._l=o,d=-1;for(var n=t.firstElementChild||t.firstChild;n;n=n[F])k(n)&&(a("ie")?n.setAttribute("_i",++r):n._i=++r,e===n&&(d=r));return d},A=function(e){return!(G(e)%2)},z=function(e){return G(e)%2},j={checked:function(){return function(e){return!!("checked"in e?e.checked:e.selected)}},disabled:function(){return function(e){return e.disabled}},enabled:function(){return function(e){return!e.disabled}},"first-child":function(){return I},"last-child":function(){return E},"only-child":function(){return function(e){return I(e)&&E(e)}},empty:function(){return function(e){for(var a=e.childNodes,t=e.childNodes.length,r=t-1;r>=0;r--){var i=a[r].nodeType;if(1===i||3==i)return!1}return!0}},contains:function(e,a){var t=a.charAt(0);return('"'==t||"'"==t)&&(a=a.slice(1,-1)),function(e){return e.innerHTML.indexOf(a)>=0}},not:function(e,a){var t=y(a)[0],r={el:1};"*"!=t.tag&&(r.tag=1),t.classes.length||(r.classes=1);var i=T(t,r);return function(e){return!i(e)}},"nth-child":function(e,a){var t=parseInt;if("odd"==a)return z;if("even"==a)return A;if(-1!=a.indexOf("n")){var r=a.split("n",2),i=r[0]?"-"==r[0]?-1:t(r[0]):1,d=r[1]?t(r[1]):0,l=0,o=-1;if(i>0?0>d?d=d%i&&i+d%i:d>0&&(d>=i&&(l=d-d%i),d%=i):0>i&&(i*=-1,d>0&&(o=d,d%=i)),i>0)return function(e){var a=G(e);return a>=l&&(0>o||o>=a)&&a%i==d};a=d}var n=t(a);return function(e){return G(e)==n}}},Q=a("ie")<9||9==a("ie")&&a("quirks")?function(e){var a=e.toLowerCase();return"class"==a&&(e="className"),function(t){return s?t.getAttribute(e):t[e]||t[a]}}:function(e){return function(a){return a&&a.getAttribute&&a.hasAttribute(e)}},T=function(e,a){if(!e)return f;a=a||{};var t=null;return"el"in a||(t=u(t,v)),"tag"in a||"*"!=e.tag&&(t=u(t,function(a){return a&&(s?a.tagName:a.tagName.toUpperCase())==e.getTag()})),"classes"in a||l(e.classes,function(e,a){var r=new RegExp("(?:^|\\s)"+e+"(?:\\s|$)");t=u(t,function(e){return r.test(e.className)}),t.count=a}),"pseudos"in a||l(e.pseudos,function(e){var a=e.name;j[a]&&(t=u(t,j[a](a,e.value)))}),"attrs"in a||l(e.attrs,function(e){var a,r=e.attr;e.type&&g[e.type]?a=g[e.type](r,e.matchFor):r.length&&(a=Q(r)),a&&(t=u(t,a))}),"id"in a||e.id&&(t=u(t,function(a){return!!a&&a.id==e.id})),t||"default"in a||(t=f),t},_=function(e){return function(a,t,r){for(;a=a[F];)if(!b||v(a)){r&&!$(a,r)||!e(a)||t.push(a);break}return t}},S=function(e){return function(a,t,r){for(var i=a[F];i;){if(k(i)){if(r&&!$(i,r))break;e(i)&&t.push(i)}i=i[F]}return t}},H=function(e,a){var r=function(e){var a=[];try{a=Array.prototype.slice.call(e)}catch(t){for(var r=0,i=e.length;i>r;r++)a.push(e[r])}return a};return e=e||f,function(i,d,l){var o,n=0,m=[];for(m=r(i.children||i.childNodes),a&&t.forEach(m,function(e){1===e.nodeType&&(m=m.concat(r(e.getElementsByTagName("*"))))});o=m[n++];)k(o)&&(!l||$(o,l))&&e(o,n)&&d.push(o);return d}},q=function(e,a){for(var t=e.parentNode;t&&t!=a;)t=t.parentNode;return!!t},x={},P=function(a){var r=x[a.query];if(r)return r;var i=a.infixOper,d=i?i.oper:"",l=T(a,{el:1}),m=a.tag,s="*"==m,y=o().getElementsByClassName;if(d){var u={el:1};s&&(u.tag=1),l=T(a,u),"+"==d?r=_(l):"~"==d?r=S(l):">"==d&&(r=H(l))}else if(a.id)l=!a.loops&&s?f:T(a,{el:1,id:1}),r=function(r,i){var d=e.byId(a.id,r.ownerDocument||r);if(r.ownerDocument&&!q(r,r.ownerDocument)){var o=11===r.nodeType?r.childNodes:[r];t.some(o,function(e){var t=H(function(e){return e.id===a.id},!0)(e,[]);return t.length?(d=t[0],!1):void 0})}if(d&&l(d))return 9==r.nodeType?M(d,i):q(d,r)?M(d,i):void 0};else if(y&&/\{\s*\[native code\]\s*\}/.test(String(y))&&a.classes.length&&!n){l=T(a,{el:1,classes:1,id:1});var v=a.classes.join(" ");r=function(e,a,t){for(var r,i=M(0,a),d=0,o=e.getElementsByClassName(v);r=o[d++];)l(r,e)&&$(r,t)&&i.push(r);return i}}else s||a.loops?(l=T(a,{el:1,tag:1,id:1}),r=function(e,t,r){for(var i,d=M(0,t),o=0,n=a.getTag(),m=n?e.getElementsByTagName(n):[];i=m[o++];)l(i,e)&&$(i,r)&&d.push(i);return d}):r=function(e,t,r){for(var i,d=M(0,t),l=0,o=a.getTag(),n=o?e.getElementsByTagName(o):[];i=n[l++];)$(i,r)&&d.push(i);return d};return x[a.query]=r},D=function(e,a){for(var t,r,i,d,l,o=M(e),n=a.length,m=0;n>m;m++){l=[],t=a[m],r=o.length-1,r>0&&(d={},l.nozip=!0);for(var s=P(t),f=0;i=o[f];f++)s(i,l,d);if(!l.length)break;o=l}return l},N={},C={},L=function(e){var a=y(d(e));if(1==a.length){var t=P(a[0]);return function(e){var a=t(e,[]);return a&&(a.nozip=!0),a}}return function(e){return D(e,a)}},K=a("ie")?"commentStrip":"nozip",R="querySelectorAll",O=!!o()[R],U=/\\[>~+]|n\+\d|([^ \\])?([>~+])([^ =])?/g,B=function(e,a,t,r){return t?(a?a+" ":"")+t+(r?" "+r:""):e},J=/([^[]*)([^\]]*])?/g,W=function(e,a,t){return a.replace(U,B)+(t||"")},V=function(e,t){if(e=e.replace(J,W),O){var r=C[e];if(r&&!t)return r}var i=N[e];if(i)return i;var d=e.charAt(0),l=-1==e.indexOf(" ");e.indexOf("#")>=0&&l&&(t=!0);var o=!(!O||t||-1!=m.indexOf(d)||a("ie")&&-1!=e.indexOf(":")||n&&e.indexOf(".")>=0||-1!=e.indexOf(":contains")||-1!=e.indexOf(":checked")||-1!=e.indexOf("|="));if(o){var s=m.indexOf(e.charAt(e.length-1))>=0?e+" *":e;return C[e]=function(a){if(9==a.nodeType||l)try{var t=a[R](s);return t[K]=!0,t}catch(r){}return V(e,!0)(a)}}var f=e.match(/([^\s,](?:"(?:\\.|[^"])+"|'(?:\\.|[^'])+'|[^,])*)/g);return N[e]=f.length<2?L(e):function(e){for(var a,t=0,r=[];a=f[t++];)r=r.concat(L(a)(e));return r}},Y=0,Z=a("ie")?function(e){return s?e.getAttribute("_uid")||e.setAttribute("_uid",++Y)||Y:e.uniqueID}:function(e){return e._uid||(e._uid=++Y)},$=function(e,a){if(!a)return 1;var t=Z(e);return a[t]?0:a[t]=1},X="_zipIdx",ea=function(e){if(e&&e.nozip)return e;if(!e||!e.length)return[];if(e.length<2)return[e[0]];var t=[];Y++;var r,i;if(a("ie")&&s){var d=Y+"";for(r=0;r<e.length;r++)(i=e[r])&&i.getAttribute(X)!=d&&(t.push(i),i.setAttribute(X,d))}else if(a("ie")&&e.commentStrip)try{for(r=0;r<e.length;r++)(i=e[r])&&v(i)&&t.push(i)}catch(l){}else for(r=0;r<e.length;r++)(i=e[r])&&i[X]!=Y&&(t.push(i),i[X]=Y);return t},aa=function(e,a){a=a||o();var t=a.ownerDocument||a;s="div"===t.createElement("div").tagName;var r=V(e)(a);return r&&r.nozip?r:ea(r)};return aa.filter=function(a,r,i){for(var d,l=[],o=y(r),n=1!=o.length||/[^\w#\.]/.test(r)?function(a){return-1!=t.indexOf(aa(r,e.byId(i)),a)}:T(o[0]),m=0;d=a[m];m++)n(d)&&l.push(d);return l},aa});//# sourceMappingURL=acme.js.map