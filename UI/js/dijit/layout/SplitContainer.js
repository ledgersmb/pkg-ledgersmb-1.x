//>>built
define("dijit/layout/SplitContainer",["dojo/_base/array","dojo/cookie","dojo/_base/declare","dojo/dom","dojo/dom-class","dojo/dom-construct","dojo/dom-geometry","dojo/dom-style","dojo/_base/event","dojo/_base/kernel","dojo/_base/lang","dojo/on","dojo/sniff","../registry","../_WidgetBase","./_LayoutWidget"],function(e,t,a,i,r,d,o,n,l,s,m,u,f,h,y,c){var v=a("dijit.layout.SplitContainer",c,{constructor:function(){s.deprecated("dijit.layout.SplitContainer is deprecated","use BorderContainer with splitter instead",2)},activeSizing:!1,sizerWidth:7,orientation:"horizontal",persist:!0,baseClass:"dijitSplitContainer",postMixInProperties:function(){this.inherited("postMixInProperties",arguments),this.isHorizontal="horizontal"==this.orientation},postCreate:function(){if(this.inherited(arguments),this.sizers=[],f("mozilla")&&(this.domNode.style.overflow="-moz-scrollbars-none"),"object"==typeof this.sizerWidth)try{this.sizerWidth=parseInt(this.sizerWidth.toString())}catch(e){this.sizerWidth=7}var t=this.ownerDocument.createElement("div");this.virtualSizer=t,t.style.position="relative",t.style.zIndex=10,t.className=this.isHorizontal?"dijitSplitContainerVirtualSizerH":"dijitSplitContainerVirtualSizerV",this.domNode.appendChild(t),i.setSelectable(t,!1)},destroy:function(){if(delete this.virtualSizer,this._ownconnects)for(var e;e=this._ownconnects.pop();)e.remove();this.inherited(arguments)},startup:function(){this._started||(e.forEach(this.getChildren(),function(e,t,a){this._setupChild(e),t<a.length-1&&this._addSizer()},this),this.persist&&this._restoreState(),this.inherited(arguments))},_setupChild:function(e){this.inherited(arguments),e.domNode.style.position="absolute",r.add(e.domNode,"dijitSplitPane")},_onSizerMouseDown:function(e){if(e.target.id){for(var t=0;t<this.sizers.length&&this.sizers[t].id!=e.target.id;t++);t<this.sizers.length&&this.beginSizing(e,t)}},_addSizer:function(e){e=void 0===e?this.sizers.length:e;var t=this.ownerDocument.createElement("div");t.id=h.getUniqueId("dijit_layout_SplitterContainer_Splitter"),this.sizers.splice(e,0,t),this.domNode.appendChild(t),t.className=this.isHorizontal?"dijitSplitContainerSizerH":"dijitSplitContainerSizerV";var a=this.ownerDocument.createElement("div");a.className="thumb",t.appendChild(a),this.connect(t,"onmousedown","_onSizerMouseDown"),i.setSelectable(t,!1)},removeChild:function(t){if(this.sizers.length){var a=e.indexOf(this.getChildren(),t);-1!=a&&(a==this.sizers.length&&a--,d.destroy(this.sizers[a]),this.sizers.splice(a,1))}this.inherited(arguments),this._started&&this.layout()},addChild:function(e,t){if(("undefined"==typeof t||"last"==t)&&(t=this.getChildren().length),this.inherited(arguments,[e,t]),this._started){var a=this.getChildren();a.length>1&&this._addSizer(t),this.layout()}},layout:function(){this.paneWidth=this._contentBox.w,this.paneHeight=this._contentBox.h;var t=this.getChildren();if(t.length){var a=this.isHorizontal?this.paneWidth:this.paneHeight;t.length>1&&(a-=this.sizerWidth*(t.length-1));var i=0;e.forEach(t,function(e){i+=e.sizeShare});var r=a/i,d=0;e.forEach(t.slice(0,t.length-1),function(e){var t=Math.round(r*e.sizeShare);e.sizeActual=t,d+=t}),t[t.length-1].sizeActual=a-d,this._checkSizes();var o=0,n=t[0].sizeActual;this._movePanel(t[0],o,n),t[0].position=o,o+=n,this.sizers&&e.some(t.slice(1),function(e,t){return this.sizers[t]?(this._moveSlider(this.sizers[t],o,this.sizerWidth),this.sizers[t].position=o,o+=this.sizerWidth,n=e.sizeActual,this._movePanel(e,o,n),e.position=o,void(o+=n)):!0},this)}},_movePanel:function(e,t,a){var i;this.isHorizontal?(e.domNode.style.left=t+"px",e.domNode.style.top=0,i={w:a,h:this.paneHeight},e.resize?e.resize(i):o.setMarginBox(e.domNode,i)):(e.domNode.style.left=0,e.domNode.style.top=t+"px",i={w:this.paneWidth,h:a},e.resize?e.resize(i):o.setMarginBox(e.domNode,i))},_moveSlider:function(e,t,a){this.isHorizontal?(e.style.left=t+"px",e.style.top=0,o.setMarginBox(e,{w:a,h:this.paneHeight})):(e.style.left=0,e.style.top=t+"px",o.setMarginBox(e,{w:this.paneWidth,h:a}))},_growPane:function(e,t){return e>0&&t.sizeActual>t.sizeMin&&(t.sizeActual-t.sizeMin>e?(t.sizeActual=t.sizeActual-e,e=0):(e-=t.sizeActual-t.sizeMin,t.sizeActual=t.sizeMin)),e},_checkSizes:function(){var t=0,a=0,i=this.getChildren();if(e.forEach(i,function(e){a+=e.sizeActual,t+=e.sizeMin}),a>=t){var r=0;if(e.forEach(i,function(e){e.sizeActual<e.sizeMin&&(r+=e.sizeMin-e.sizeActual,e.sizeActual=e.sizeMin)}),r>0){var d=this.isDraggingLeft?i.reverse():i;e.forEach(d,function(e){r=this._growPane(r,e)},this)}}else e.forEach(i,function(e){e.sizeActual=Math.round(a*(e.sizeMin/t))})},beginSizing:function(e,t){var a=this.getChildren();this.paneBefore=a[t],this.paneAfter=a[t+1],this.paneBefore.sizeBeforeDrag=this.paneBefore.sizeActual,this.paneAfter.sizeBeforeDrag=this.paneAfter.sizeActual,this.paneAfter.positionBeforeDrag=this.paneAfter.position,this.isSizing=!0,this.sizingSplitter=this.sizers[t],this.sizingSplitter.positionBeforeDrag=n.get(this.sizingSplitter,this.isHorizontal?"left":"top"),this.cover?this.cover.style.zIndex=5:this.cover=d.create("div",{style:{position:"absolute",zIndex:5,top:0,left:0,width:"100%",height:"100%"}},this.domNode),this.sizingSplitter.style.zIndex=6,this.startPoint=this.lastPoint=this.isHorizontal?e.pageX:e.pageY,this.maxDelta=this.paneAfter.sizeActual-this.paneAfter.sizeMin,this.minDelta=-1*(this.paneBefore.sizeActual-this.paneBefore.sizeMin),this.activeSizing||this._showSizingLine(),this._ownconnects=[u(this.ownerDocument.documentElement,"mousemove",m.hitch(this,"changeSizing")),u(this.ownerDocument.documentElement,"mouseup",m.hitch(this,"endSizing"))],l.stop(e)},changeSizing:function(e){if(this.isSizing){this.lastPoint=this.isHorizontal?e.pageX:e.pageY;var t=Math.max(Math.min(this.lastPoint-this.startPoint,this.maxDelta),this.minDelta);this.activeSizing?this._updateSize(t):this._moveSizingLine(t),l.stop(e)}},endSizing:function(){if(this.isSizing){this.cover&&(this.cover.style.zIndex=-1),this.activeSizing||this._hideSizingLine();var e=Math.max(Math.min(this.lastPoint-this.startPoint,this.maxDelta),this.minDelta);this._updateSize(e),this.isSizing=!1,this.persist&&this._saveState(this);for(var t;t=this._ownconnects.pop();)t.remove()}},_updateSize:function(t){this.paneBefore.sizeActual=this.paneBefore.sizeBeforeDrag+t,this.paneAfter.position=this.paneAfter.positionBeforeDrag+t,this.paneAfter.sizeActual=this.paneAfter.sizeBeforeDrag-t,e.forEach(this.getChildren(),function(e){e.sizeShare=e.sizeActual}),this._started&&this.layout()},_showSizingLine:function(){this._moveSizingLine(0),o.setMarginBox(this.virtualSizer,this.isHorizontal?{w:this.sizerWidth,h:this.paneHeight}:{w:this.paneWidth,h:this.sizerWidth}),this.virtualSizer.style.display="block"},_hideSizingLine:function(){this.virtualSizer.style.display="none"},_moveSizingLine:function(e){var t=e+this.sizingSplitter.positionBeforeDrag;n.set(this.virtualSizer,this.isHorizontal?"left":"top",t+"px")},_getCookieName:function(e){return this.id+"_"+e},_restoreState:function(){e.forEach(this.getChildren(),function(e,a){var i=this._getCookieName(a),r=t(i);if(r){var d=parseInt(r);"number"==typeof d&&(e.sizeShare=d)}},this)},_saveState:function(){this.persist&&e.forEach(this.getChildren(),function(e,a){t(this._getCookieName(a),e.sizeShare,{expires:365})},this)}});return v.ChildWidgetProperties={sizeMin:10,sizeShare:10},m.extend(y,v.ChildWidgetProperties),v});//# sourceMappingURL=SplitContainer.js.map