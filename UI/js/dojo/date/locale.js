//>>built
define("dojo/date/locale",["../_base/lang","../_base/array","../date","../cldr/supplemental","../i18n","../regexp","../string","../i18n!../cldr/nls/gregorian","module"],function(e,a,t,r,d,i,l,o,n){function m(e,a,t,d){return d.replace(/([a-z])\1*/gi,function(i){var o,n,m=i.charAt(0),s=i.length,f=["abbr","wide","narrow"];switch(m){case"G":o=a[4>s?"eraAbbr":"eraNames"][e.getFullYear()<0?0:1];break;case"y":switch(o=e.getFullYear(),s){case 1:break;case 2:if(!t.fullYear){o=String(o),o=o.substr(o.length-2);break}default:n=!0}break;case"Q":case"q":o=Math.ceil((e.getMonth()+1)/3),n=!0;break;case"M":case"L":var M=e.getMonth();if(3>s)o=M+1,n=!0;else{var u=["months","L"==m?"standAlone":"format",f[s-3]].join("-");o=a[u][M]}break;case"w":var v=0;o=y._getWeekOfYear(e,v),n=!0;break;case"d":o=e.getDate(),n=!0;break;case"D":o=y._getDayOfYear(e),n=!0;break;case"e":case"c":var h=e.getDay();if(2>s){o=(h-r.getFirstDayOfWeek(t.locale)+8)%7;break}case"E":if(h=e.getDay(),3>s)o=h+1,n=!0;else{var c=["days","c"==m?"standAlone":"format",f[s-3]].join("-");o=a[c][h]}break;case"a":var F=e.getHours()<12?"am":"pm";o=t[F]||a["dayPeriods-format-wide-"+F];break;case"h":case"H":case"K":case"k":var p=e.getHours();switch(m){case"h":o=p%12||12;break;case"H":o=p;break;case"K":o=p%12;break;case"k":o=p||24}n=!0;break;case"m":o=e.getMinutes(),n=!0;break;case"s":o=e.getSeconds(),n=!0;break;case"S":o=Math.round(e.getMilliseconds()*Math.pow(10,s-3)),n=!0;break;case"v":case"z":if(o=y._getZone(e,!0,t))break;s=4;case"Z":var g=y._getZone(e,!1,t),w=[0>=g?"+":"-",l.pad(Math.floor(Math.abs(g)/60),2),l.pad(Math.abs(g)%60,2)];4==s&&(w.splice(0,0,"GMT"),w.splice(3,0,":")),o=w.join("");break;default:throw new Error("dojo.date.locale.format: invalid pattern char: "+d)}return n&&(o=l.pad(o,s)),o})}function s(e,t,r,d){var i=function(e){return e};t=t||i,r=r||i,d=d||i;var l=e.match(/(''|[^'])+/g),o="'"==e.charAt(0);return a.forEach(l,function(e,a){e?(l[a]=(o?r:t)(e.replace(/''/g,"'")),o=!o):l[a]=""}),d(l.join(""))}function f(e,a,t,r){return r=i.escapeString(r),t.strict||(r=r.replace(" a"," ?a")),r.replace(/([a-z])\1*/gi,function(r){var d,i=r.charAt(0),l=r.length,o="",n="";switch(t.strict?(l>1&&(o="0{"+(l-1)+"}"),l>2&&(n="0{"+(l-2)+"}")):(o="0?",n="0{0,2}"),i){case"y":d="\\d{2,4}";break;case"M":case"L":if(l>2){var m=a["months-"+("L"==i?"standAlone":"format")+"-"+M[l-3]].slice(0);d=m.join("|"),t.strict||(d=d.replace(/\./g,""),d="(?:"+d+")\\.?")}else d="1[0-2]|"+o+"[1-9]";break;case"D":d="[12][0-9][0-9]|3[0-5][0-9]|36[0-6]|"+o+"[1-9][0-9]|"+n+"[1-9]";break;case"d":d="3[01]|[12]\\d|"+o+"[1-9]";break;case"w":d="[1-4][0-9]|5[0-3]|"+o+"[1-9]";break;case"E":case"e":case"c":d=".+?";break;case"h":d="1[0-2]|"+o+"[1-9]";break;case"k":d="1[01]|"+o+"\\d";break;case"H":d="1\\d|2[0-3]|"+o+"\\d";break;case"K":d="1\\d|2[0-4]|"+o+"[1-9]";break;case"m":case"s":d="[0-5]\\d";break;case"S":d="\\d{"+l+"}";break;case"a":var s=t.am||a["dayPeriods-format-wide-am"],f=t.pm||a["dayPeriods-format-wide-pm"];d=s+"|"+f,t.strict||(s!=s.toLowerCase()&&(d+="|"+s.toLowerCase()),f!=f.toLowerCase()&&(d+="|"+f.toLowerCase()),-1!=d.indexOf(".")&&(d+="|"+d.replace(/\./g,""))),d=d.replace(/\./g,"\\.");break;default:d=".*"}return e&&e.push(r),"("+d+")"}).replace(/[\xa0 ]/g,"[\\s\\xa0]")}var y={};e.setObject(n.id.replace(/\//g,"."),y),y._getZone=function(e,a){return a?t.getTimezoneName(e):e.getTimezoneOffset()},y.format=function(a,t){t=t||{};var r=d.normalizeLocale(t.locale),i=t.formatLength||"short",l=y._getGregorianBundle(r),o=[],n=e.hitch(this,m,a,l,t);if("year"==t.selector)return s(l["dateFormatItem-yyyy"]||"yyyy",n);var f;return"date"!=t.selector&&(f=t.timePattern||l["timeFormat-"+i],f&&o.push(s(f,n))),"time"!=t.selector&&(f=t.datePattern||l["dateFormat-"+i],f&&o.push(s(f,n))),1==o.length?o[0]:l["dateTimeFormat-"+i].replace(/\'/g,"").replace(/\{(\d+)\}/g,function(e,a){return o[a]})},y.regexp=function(e){return y._parseInfo(e).regexp},y._parseInfo=function(a){a=a||{};var t,r=d.normalizeLocale(a.locale),i=y._getGregorianBundle(r),l=a.formatLength||"short",o=a.datePattern||i["dateFormat-"+l],n=a.timePattern||i["timeFormat-"+l];t="date"==a.selector?o:"time"==a.selector?n:i["dateTimeFormat-"+l].replace(/\{(\d+)\}/g,function(e,a){return[n,o][a]});var m=[],M=s(t,e.hitch(this,f,m,i,a));return{regexp:M,tokens:m,bundle:i}},y.parse=function(e,r){var d=/[\u200E\u200F\u202A\u202E]/g,i=y._parseInfo(r),l=i.tokens,o=i.bundle,n=new RegExp("^"+i.regexp.replace(d,"")+"$",i.strict?"":"i"),m=n.exec(e&&e.replace(d,""));if(!m)return null;var s=["abbr","wide","narrow"],f=[1970,0,1,0,0,0,0],M="",u=a.every(m,function(e,t){if(!t)return!0;var d=l[t-1],i=d.length,n=d.charAt(0);switch(n){case"y":if(2!=i&&r.strict)f[0]=e;else if(100>e){e=Number(e);var m=""+(new Date).getFullYear(),y=100*m.substring(0,2),u=Math.min(Number(m.substring(2,4))+20,99);f[0]=u>e?y+e:y-100+e}else{if(r.strict)return!1;f[0]=e}break;case"M":case"L":if(i>2){var v=o["months-"+("L"==n?"standAlone":"format")+"-"+s[i-3]].concat();if(r.strict||(e=e.replace(".","").toLowerCase(),v=a.map(v,function(e){return e.replace(".","").toLowerCase()})),e=a.indexOf(v,e),-1==e)return!1}else e--;f[1]=e;break;case"E":case"e":case"c":var h=o["days-"+("c"==n?"standAlone":"format")+"-"+s[i-3]].concat();if(r.strict||(e=e.toLowerCase(),h=a.map(h,function(e){return e.toLowerCase()})),e=a.indexOf(h,e),-1==e)return!1;break;case"D":f[1]=0;case"d":f[2]=e;break;case"a":var c=r.am||o["dayPeriods-format-wide-am"],F=r.pm||o["dayPeriods-format-wide-pm"];if(!r.strict){var p=/\./g;e=e.replace(p,"").toLowerCase(),c=c.replace(p,"").toLowerCase(),F=F.replace(p,"").toLowerCase()}if(r.strict&&e!=c&&e!=F)return!1;M=e==F?"p":e==c?"a":"";break;case"K":24==e&&(e=0);case"h":case"H":case"k":if(e>23)return!1;f[3]=e;break;case"m":f[4]=e;break;case"s":f[5]=e;break;case"S":f[6]=e}return!0}),v=+f[3];"p"===M&&12>v?f[3]=v+12:"a"===M&&12==v&&(f[3]=0);var h=new Date(f[0],f[1],f[2],f[3],f[4],f[5],f[6]);r.strict&&h.setFullYear(f[0]);var c=l.join(""),F=-1!=c.indexOf("d"),p=-1!=c.indexOf("M");return!u||p&&h.getMonth()>f[1]||F&&h.getDate()>f[2]?null:((p&&h.getMonth()<f[1]||F&&h.getDate()<f[2])&&(h=t.add(h,"hour",1)),h)};var M=["abbr","wide","narrow"],u=[],v={};return y.addCustomFormats=function(e,a){u.push({pkg:e,name:a}),v={}},y._getGregorianBundle=function(t){if(v[t])return v[t];var r={};return a.forEach(u,function(a){var i=d.getLocalization(a.pkg,a.name,t);r=e.mixin(r,i)},this),v[t]=r},y.addCustomFormats(n.id.replace(/\/date\/locale$/,".cldr"),"gregorian"),y.getNames=function(e,a,t,r){var d,i=y._getGregorianBundle(r),l=[e,t,a];if("standAlone"==t){var o=l.join("-");d=i[o],1==d[0]&&(d=void 0)}return l[1]="format",(d||i[l.join("-")]).concat()},y.isWeekend=function(e,a){var t=r.getWeekend(a),d=(e||new Date).getDay();return t.end<t.start&&(t.end+=7,d<t.start&&(d+=7)),d>=t.start&&d<=t.end},y._getDayOfYear=function(e){return t.difference(new Date(e.getFullYear(),0,1,e.getHours()),e)+1},y._getWeekOfYear=function(e,a){1==arguments.length&&(a=0);var t=new Date(e.getFullYear(),0,1).getDay(),r=(t-a+7)%7,d=Math.floor((y._getDayOfYear(e)+r-1)/7);return t==a&&d++,d},y});//# sourceMappingURL=locale.js.map