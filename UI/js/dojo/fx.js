//>>built
define("dojo/fx",["./_base/lang","./Evented","./_base/kernel","./_base/array","./aspect","./_base/fx","./dom","./dom-style","./dom-geometry","./ready","require"],function(e,t,n,r,o,i,a,s,c,u,d){n.isAsync||u(0,function(){var e=["./fx/Toggler"];d(e)});var l=n.fx={},f={_fire:function(e,t){return this[e]&&this[e].apply(this,t||[]),this}},h=function(e){this._index=-1,this._animations=e||[],this._current=this._onAnimateCtx=this._onEndCtx=null,this.duration=0,r.forEach(this._animations,function(e){e&&("undefined"!=typeof e.duration&&(this.duration+=e.duration),e.delay&&(this.duration+=e.delay))},this)};h.prototype=new t,e.extend(h,{_onAnimate:function(){this._fire("onAnimate",arguments)},_onEnd:function(){this._onAnimateCtx.remove(),this._onEndCtx.remove(),this._onAnimateCtx=this._onEndCtx=null,this._index+1==this._animations.length?this._fire("onEnd"):(this._current=this._animations[++this._index],this._onAnimateCtx=o.after(this._current,"onAnimate",e.hitch(this,"_onAnimate"),!0),this._onEndCtx=o.after(this._current,"onEnd",e.hitch(this,"_onEnd"),!0),this._current.play(0,!0))},play:function(t,n){if(this._current||(this._current=this._animations[this._index=0]),!n&&"playing"==this._current.status())return this;var r=o.after(this._current,"beforeBegin",e.hitch(this,function(){this._fire("beforeBegin")}),!0),i=o.after(this._current,"onBegin",e.hitch(this,function(){this._fire("onBegin",arguments)}),!0),a=o.after(this._current,"onPlay",e.hitch(this,function(){this._fire("onPlay",arguments),r.remove(),i.remove(),a.remove()}));return this._onAnimateCtx&&this._onAnimateCtx.remove(),this._onAnimateCtx=o.after(this._current,"onAnimate",e.hitch(this,"_onAnimate"),!0),this._onEndCtx&&this._onEndCtx.remove(),this._onEndCtx=o.after(this._current,"onEnd",e.hitch(this,"_onEnd"),!0),this._current.play.apply(this._current,arguments),this},pause:function(){if(this._current){var t=o.after(this._current,"onPause",e.hitch(this,function(){this._fire("onPause",arguments),t.remove()}),!0);this._current.pause()}return this},gotoPercent:function(e,t){this.pause();var n=this.duration*e;return this._current=null,r.some(this._animations,function(e,t){return n<=e.duration?(this._current=e,this._index=t,!0):(n-=e.duration,!1)},this),this._current&&this._current.gotoPercent(n/this._current.duration),t&&this.play(),this},stop:function(t){if(this._current){if(t){for(;this._index+1<this._animations.length;++this._index)this._animations[this._index].stop(!0);this._current=this._animations[this._index]}var n=o.after(this._current,"onStop",e.hitch(this,function(){this._fire("onStop",arguments),n.remove()}),!0);this._current.stop()}return this},status:function(){return this._current?this._current.status():"stopped"},destroy:function(){this.stop(),this._onAnimateCtx&&this._onAnimateCtx.remove(),this._onEndCtx&&this._onEndCtx.remove()}}),e.extend(h,f),l.chain=function(t){return new h(e.isArray(t)?t:Array.prototype.slice.call(t,0))};var p=function(t){this._animations=t||[],this._connects=[],this._finished=0,this.duration=0,r.forEach(t,function(t){var n=t.duration;t.delay&&(n+=t.delay),this.duration<n&&(this.duration=n),this._connects.push(o.after(t,"onEnd",e.hitch(this,"_onEnd"),!0))},this),this._pseudoAnimation=new i.Animation({curve:[0,1],duration:this.duration});var n=this;r.forEach(["beforeBegin","onBegin","onPlay","onAnimate","onPause","onStop","onEnd"],function(e){n._connects.push(o.after(n._pseudoAnimation,e,function(){n._fire(e,arguments)},!0))})};return e.extend(p,{_doAction:function(e,t){return r.forEach(this._animations,function(n){n[e].apply(n,t)}),this},_onEnd:function(){++this._finished>this._animations.length&&this._fire("onEnd")},_call:function(e,t){var n=this._pseudoAnimation;n[e].apply(n,t)},play:function(){return this._finished=0,this._doAction("play",arguments),this._call("play",arguments),this},pause:function(){return this._doAction("pause",arguments),this._call("pause",arguments),this},gotoPercent:function(e,t){var n=this.duration*e;return r.forEach(this._animations,function(e){e.gotoPercent(e.duration<n?1:n/e.duration,t)}),this._call("gotoPercent",arguments),this},stop:function(){return this._doAction("stop",arguments),this._call("stop",arguments),this},status:function(){return this._pseudoAnimation.status()},destroy:function(){this.stop(),r.forEach(this._connects,function(e){e.remove()})}}),e.extend(p,f),l.combine=function(t){return new p(e.isArray(t)?t:Array.prototype.slice.call(t,0))},l.wipeIn=function(t){var n,r=t.node=a.byId(t.node),c=r.style,u=i.animateProperty(e.mixin({properties:{height:{start:function(){if(n=c.overflow,c.overflow="hidden","hidden"==c.visibility||"none"==c.display)return c.height="1px",c.display="",c.visibility="",1;var e=s.get(r,"height");return Math.max(e,1)},end:function(){return r.scrollHeight}}}},t)),d=function(){c.height="auto",c.overflow=n};return o.after(u,"onStop",d,!0),o.after(u,"onEnd",d,!0),u},l.wipeOut=function(t){var n,r=t.node=a.byId(t.node),s=r.style,c=i.animateProperty(e.mixin({properties:{height:{end:1}}},t));o.after(c,"beforeBegin",function(){n=s.overflow,s.overflow="hidden",s.display=""},!0);var u=function(){s.overflow=n,s.height="auto",s.display="none"};return o.after(c,"onStop",u,!0),o.after(c,"onEnd",u,!0),c},l.slideTo=function(t){var n=t.node=a.byId(t.node),r=null,u=null,d=function(e){return function(){var t=s.getComputedStyle(e),n=t.position;if(r="absolute"==n?e.offsetTop:parseInt(t.top)||0,u="absolute"==n?e.offsetLeft:parseInt(t.left)||0,"absolute"!=n&&"relative"!=n){var o=c.position(e,!0);r=o.y,u=o.x,e.style.position="absolute",e.style.top=r+"px",e.style.left=u+"px"}}}(n);d();var l=i.animateProperty(e.mixin({properties:{top:t.top||0,left:t.left||0}},t));return o.after(l,"beforeBegin",d,!0),l},l});//# sourceMappingURL=fx.js.map