//>>built
define("dojo/dnd/Moveable",["../_base/array","../_base/declare","../_base/lang","../dom","../dom-class","../Evented","../has","../on","../topic","../touch","./common","./Mover","../_base/window"],function(e,a,t,r,d,i,l,o,n,m,s,f,y){function M(){"touchAction"in document.body.style?u="touchAction":"msTouchAction"in document.body.style&&(u="msTouchAction"),(v=function(e,a){e.style[u]=a})(arguments[0],arguments[1])}var u,v=function(){};l("touch-action")&&(v=M);var h=a("dojo.dnd.Moveable",[i],{handle:"",delay:0,skip:!1,constructor:function(e,a){this.node=r.byId(e),v(this.node,"none"),a||(a={}),this.handle=a.handle?r.byId(a.handle):null,this.handle||(this.handle=this.node),this.delay=a.delay>0?a.delay:0,this.skip=a.skip,this.mover=a.mover?a.mover:f,this.events=[o(this.handle,m.press,t.hitch(this,"onMouseDown")),o(this.handle,"dragstart",t.hitch(this,"onSelectStart")),o(this.handle,"selectstart",t.hitch(this,"onSelectStart"))]},markupFactory:function(e,a,t){return new t(a,e)},destroy:function(){e.forEach(this.events,function(e){e.remove()}),v(this.node,""),this.events=this.node=this.handle=null},onMouseDown:function(e){this.skip&&s.isFormElement(e)||(this.delay?(this.events.push(o(this.handle,m.move,t.hitch(this,"onMouseMove")),o(this.handle.ownerDocument,m.release,t.hitch(this,"onMouseUp"))),this._lastX=e.pageX,this._lastY=e.pageY):this.onDragDetected(e),e.stopPropagation(),e.preventDefault())},onMouseMove:function(e){(Math.abs(e.pageX-this._lastX)>this.delay||Math.abs(e.pageY-this._lastY)>this.delay)&&(this.onMouseUp(e),this.onDragDetected(e)),e.stopPropagation(),e.preventDefault()},onMouseUp:function(e){for(var a=0;2>a;++a)this.events.pop().remove();e.stopPropagation(),e.preventDefault()},onSelectStart:function(e){this.skip&&s.isFormElement(e)||(e.stopPropagation(),e.preventDefault())},onDragDetected:function(e){new this.mover(this.node,e,this)},onMoveStart:function(e){n.publish("/dnd/move/start",e),d.add(y.body(),"dojoMove"),d.add(this.node,"dojoMoveItem")},onMoveStop:function(e){n.publish("/dnd/move/stop",e),d.remove(y.body(),"dojoMove"),d.remove(this.node,"dojoMoveItem")},onFirstMove:function(){},onMove:function(e,a){this.onMoving(e,a);var t=e.node.style;t.left=a.l+"px",t.top=a.t+"px",this.onMoved(e,a)},onMoving:function(){},onMoved:function(){}});return h});//# sourceMappingURL=Moveable.js.map