//>>built
define("lsmb/menus/Tree",["dojo/_base/declare","dojo/on","dojo/_base/lang","dojo/_base/event","dojo/mouse","dojo/_base/array","dojo/store/JsonRest","dojo/store/Observable","dojo/store/Memory","dijit/Tree","dijit/tree/ObjectStoreModel","dijit/registry"],function(e,t,a,i,r,o,d,n,l,s,m,u){var f=new d({target:"menu.pl?action=menuitems_json",idProperty:"id"}),h=new l({idProperty:"id"});h=new n(h);var c=!1,y=new m({store:h,labelAttr:"label",mayHaveChildren:function(e){return e.menu},getChildren:function(e,t,a){c?t(h.query({parent:e.id})):(f.query({}).then(function(a){h.setData(a),t(h.query({parent:e.id}))},function(){a()}),c=!0)},getRoot:function(e){e({id:0})}});return e("lsmb/menus/Tree",[s],{model:y,showRoot:!1,openOnClick:!0,postCreate:function(){this.inherited(arguments);this.own(t(this.containerNode,"mousedown",a.hitch(this,this.__onClick)))},onClick:function(e,t,a){if(!e.menu){var i="",d=r.isLeft(a)&&(a.ctrlKey||a.metaKey)||r.isMiddle(a)||o.some(e.args,function(e){return"new=1"==e});if(e.module&&(i+=e.module+"?",i+=e.args.join("&")),d)window.open(location.origin+location.pathname+location.search+"#"+i,"_blank");else{i+="#"+Date.now();var n=u.byId("maindiv");n.load_link(i)}}},__onClick:function(e){if(!r.isLeft(e)||e.ctrlKey||e.metaKey){i.stop(e),e.preventDefault();var t=dijit.getEnclosingWidget(e.target),a=t.item;this.onClick(a,t,e)}}})});//# sourceMappingURL=Tree.js.map