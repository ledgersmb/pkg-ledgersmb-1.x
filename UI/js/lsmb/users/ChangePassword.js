//>>built
require({cache:{"url:lsmb/users/templates/PasswordChange.html":'  \x3cdiv\x3e\n  \x3cdiv id\x3d"pwtitle" width\x3d"100%" class\x3d"listheading"\x3e\x3c/div\x3e \n  \x3cdiv id\x3d"pwfeedback" data-dojo-type\x3d"dijit/layout/ContentPane" data-dojo-attach-point\x3d"feedback"\x3e\x26nbsp;\x3c/div\x3e \n  \x3cdiv data-dojo-type\x3d"lsmb/TabularForm" id\x3d"pwcontainer" data-dojo-props\x3d"cols:1"\x3e \n    \x3cdiv class\x3d"input-line"\x3e \n      \x3cinput id\x3d"old-pw" data-dojo-type\x3d"dijit/form/TextBox" type\x3d"password" pwType\x3d"old" data-dojo-attach-point\x3d"oldpw" /\x3e \n    \x3c/div\x3e\x3cdiv class\x3d"input-line"\x3e \n      \x3cdiv id\x3d"new-pw" data-dojo-type\x3d"dijit/form/TextBox" type\x3d"password" pwType\x3d"new" data-dojo-attach-point\x3d"newpw"\x3e\x3c/div\x3e \n    \x3c/div\x3e\x3cdiv class\x3d"input-line" id\x3d"pw-strength-container"\x3e \n        \x3cdiv id\x3d"pw-strength" data-dojo-type\x3d"dijit/layout/ContentPane"\x3e0\x3c/div\x3e\n    \x3c/div\x3e\x3cdiv class\x3d"input-line"\x3e \n      \x3cdiv id\x3d"verify-pw" data-dojo-type\x3d"dijit/form/TextBox" type\x3d"password" pwType\x3d"verify" data-dojo-attach-point\x3d"verified"\x3e\x3c/div\x3e \n    \x3c/div\x3e\x3cdiv class\x3d"input-line"\x3e \n      \x3cbutton data-dojo-type\x3d"dijit/form/Button" id\x3d"pw-change" data-dojo-attach-point\x3d"submitbutton"\x3e\x3c/button\x3e \n    \x3c/div\x3e\x3cdiv class\x3d"input-line"\x3e \n\x3c/div\x3e\x3c/div\x3e\n'}});
define("lsmb/users/ChangePassword","lsmb/TabularForm dojo/_base/declare dijit/_WidgetBase dijit/_TemplatedMixin dijit/_WidgetsInTemplateMixin dijit/layout/ContentPane dijit/registry dojo/on dijit/form/TextBox dijit/form/Button dojo/text!./templates/PasswordChange.html dojo/request dijit/_Container".split(" "),function(q,g,h,k,l,r,e,f,s,t,m,n,u){return g("lsmb/users/ChangePassword",[h,k,l],{templateString:m,_lstrings:{title:"Change Password","old password":"Old Password","new password":"New password",
verify:"Verify",change:"Change Password","no-oldpw":"No Old Password",strength:"Strength"},lstrings:{},text:function(a){return void 0===this.lstrings[a]?a:this.lstrings[a]},startup:function(){for(str in this._lstrings)this.lstrings[str]||(this.lstrings[str]=this._lstrings[str]);document.getElementById("pwtitle").innerHTML=this.lstrings.title;I=this;f(this.newpw,"keypress",function(){I.setStrengthClass()});e.byId("old-pw").set("title",this.text("old password"));e.byId("new-pw").set("title",this.text("new password"));
e.byId("verify-pw").set("title",this.text("verify"));e.byId("pw-change").set("innerHTML",this.text("change"));e.byId("pw-strength").set("title",this.text("strength"));f(this.submitbutton,"click",function(){I.submit_form()});this.inherited(arguments)},scorePassword:function(){var a=e.byId("new-pw").get("value"),b=0;if(!a)return b;for(var c={},d=0;d<a.length;d++)c[a[d]]=(c[a[d]]||0)+1,b+=5/c[a[d]];a={digits:/\d/.test(a),lower:/[a-z]/.test(a),upper:/[A-Z]/.test(a),nonWords:/\W/.test(a)};variationCount=
0;for(var p in a)variationCount+=!0===a[p]?1:0;b+=10*(variationCount-1);return parseInt(b)},setStrengthClass:function(){var a=this.scorePassword(),b="";80<a?b="strong":60<a?b="good":30<=a&&(b="weak");var c=e.byId("pw-strength");c.set("class",b);c.set("innerHTML",a)},submit_form:function(){var a=this;document.getElementById("username");var b=a.oldpw.get("value"),c=a.newpw.get("value"),d=a.verified.get("value");if(""===b||""===c)return a.setFeedback(0,a.text("Password Required"));if(c!==d)return a.setFeedback(0,
a.text("Confirmation did not match"));n("user.pl",{data:{action:"change_password",old_password:b,new_password:c,confirm_password:d},method:"POST"}).then(function(b){a.setFeedback(1,a.text("Password Changed"))}).otherwise(function(b){200!=b.response.status&&("500"!=b.response.status?a.setFeedback(0,a.text("Bad username/Password")):a.setFeedback(0,a.text("Company does not exist.")))})},setFeedback:function(a,b){a?this.feedback.set("class","success"):this.feedback.set("class","failure");this.feedback.set("innerHTML",
b)}})});
//# sourceMappingURL=ChangePassword.js.map