//>>built
define("dojo/request/node",["require","./util","./handlers","../errors/RequestTimeoutError","../node!http","../node!https","../node!url","../node!stream"],function(e,a,t,r,i,d,l,o){function n(e,o){var n=a.parseArgs(e,a.deepCreate(f,o),o&&o.data instanceof s);e=n.url,o=n.options;var m=a.deferred(n,function(e,a){a.clientRequest.abort()});e=l.parse(e);var y=n.requestOptions={hostname:e.hostname,port:e.port,socketPath:o.socketPath,method:o.method,headers:o.headers,agent:o.agent,pfx:o.pfx,key:o.key,passphrase:o.passphrase,cert:o.cert,ca:o.ca,ciphers:o.ciphers,rejectUnauthorized:o.rejectUnauthorized===!1?!1:!0};e.path&&(y.path=e.path),(o.user||o.password)&&(y.auth=(o.user||"")+":"+(o.password||""));var u=n.clientRequest=("https:"===e.protocol?d:i).request(y);if(o.socketOptions&&("timeout"in o.socketOptions&&u.setTimeout(o.socketOptions.timeout),"noDelay"in o.socketOptions&&u.setNoDelay(o.socketOptions.noDelay),"keepAlive"in o.socketOptions)){var M=o.socketOptions.keepAlive;u.setKeepAlive(M>=0,M||0)}if(u.on("socket",function(){n.hasSocket=!0,m.progress(n)}),u.on("response",function(e){n.clientResponse=e,n.status=e.statusCode,n.getHeader=function(a){return e.headers[a.toLowerCase()]||null};var r=[];e.on("data",function(e){r.push(e)}),e.on("end",function(){v&&clearTimeout(v),n.text=r.join(""),a.checkStatus(n.status)||m.reject({message:"http response code "+n.status,response:n});try{t(n),m.resolve(n)}catch(e){m.reject(e)}})}),u.on("error",m.reject),o.data?"string"==typeof o.data?u.end(o.data):o.data.pipe(u):u.end(),o.timeout)var v=setTimeout(function(){m.cancel(new r(n))},o.timeout);return m.promise}var m,s=o.Stream,f={method:"GET",query:null,data:m,headers:{}};return a.addCommonMethods(n),n});//# sourceMappingURL=node.js.map