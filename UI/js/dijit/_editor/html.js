//>>built
define("dijit/_editor/html",["dojo/_base/array","dojo/_base/lang","dojo/sniff"],function(e,t,a){var r={};t.setObject("dijit._editor.html",r);var i=r.escapeXml=function(e,t){return e=e.replace(/&/gm,"&amp;").replace(/</gm,"&lt;").replace(/>/gm,"&gt;").replace(/"/gm,"&quot;"),t||(e=e.replace(/'/gm,"&#39;")),e};return r.getNodeHtml=function(e){var t=[];return r.getNodeHtmlHelper(e,t),t.join("")},r.getNodeHtmlHelper=function(t,d){switch(t.nodeType){case 1:var o=t.nodeName.toLowerCase();if(!o||"/"==o.charAt(0))return"";d.push("<",o);var n,l=[],s={};if(a("dom-attributes-explicit")||a("dom-attributes-specified-flag"))for(var m=0;n=t.attributes[m++];){var f=n.name;if(!("_dj"===f.substr(0,3)||a("dom-attributes-specified-flag")&&!n.specified||f in s)){var u=n.value;("src"==f||"href"==f)&&t.getAttribute("_djrealurl")&&(u=t.getAttribute("_djrealurl")),8===a("ie")&&"style"===f&&(u=u.replace("HEIGHT:","height:").replace("WIDTH:","width:")),l.push([f,u]),s[f]=u}}else{var y=/^input$|^img$/i.test(t.nodeName)?t:t.cloneNode(!1),h=y.outerHTML,c=/[\w-]+=("[^"]*"|'[^']*'|\S*)/gi,M=h.match(c);h=h.substr(0,h.indexOf(">")),e.forEach(M,function(e){if(e){var a=e.indexOf("=");if(a>0){var r=e.substring(0,a);if("_dj"!=r.substr(0,3)){if(("src"==r||"href"==r)&&t.getAttribute("_djrealurl"))return void l.push([r,t.getAttribute("_djrealurl")]);var i,d;switch(r){case"style":i=t.style.cssText.toLowerCase();break;case"class":i=t.className;break;case"width":if("img"===o){d=/width=(\S+)/i.exec(h),d&&(i=d[1]);break}case"height":if("img"===o){d=/height=(\S+)/i.exec(h),d&&(i=d[1]);break}default:i=t.getAttribute(r)}null!=i&&l.push([r,i.toString()])}}}},this)}l.sort(function(e,t){return e[0]<t[0]?-1:e[0]==t[0]?0:1});for(var v=0;n=l[v++];)d.push(" ",n[0],'="',"string"==typeof n[1]?i(n[1],!0):n[1],'"');switch(o){case"br":case"hr":case"img":case"input":case"base":case"meta":case"area":case"basefont":d.push(" />");break;case"script":d.push(">",t.innerHTML,"</",o,">");break;default:d.push(">"),t.hasChildNodes()&&r.getChildrenHtmlHelper(t,d),d.push("</",o,">")}break;case 4:case 3:d.push(i(t.nodeValue,!0));break;case 8:d.push("<!--",i(t.nodeValue,!0),"-->");break;default:d.push("<!-- Element not recognized - Type: ",t.nodeType," Name: ",t.nodeName,"-->")}},r.getChildrenHtml=function(e){var t=[];return r.getChildrenHtmlHelper(e,t),t.join("")},r.getChildrenHtmlHelper=function(e,t){if(e)for(var i,d=e.childNodes||e,o=!a("ie")||d!==e,n=0;i=d[n++];)o&&i.parentNode!=e||r.getNodeHtmlHelper(i,t)},r});//# sourceMappingURL=html.js.map