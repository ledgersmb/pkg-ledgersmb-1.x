debian/TODO for LedgerSMB ledgersmb-1.5 package


====================================================================================================
  - See also https://github.com/ledgersmb/pkg-ledgersmb-1.5/issues
-----------------------------------------------------------------------------------
	- Project has totally moved was from SourceForge.net, so debian/watch needs to
	be updated for the new locations of the distribution archive and its detached
	pgp file for verifiction.
	
- An update for the archive itself appears to have been successful but the *.asc
associated with it useed for the pgp verification does not seem to get refereneced
properly has that step fails.
	
- debian/watch: expand the uversionmangle regular expression to exclude the v1.2,
v1.3, and v1.4 versions.

----------------------------------------------------------------------------------------------------


	- Discussed in IRC some of the permission fix issues.  Erik took care of
	fixing many of them in both master & 1.5 so when the next release comes out
	will need to run a build of both ledgresmb & ledgersmb-1.5 without the 
	fixes enabled in order to check how the fix permissions stanza in d/rules
	can be updated for that.
	- Referance also https://github.com/ledgersmb/LedgerSMB/issues/2899 which 
  for the creation of a test in upstream that checks for such permission issues.

- As of the packageing for 1.5.8, this is what is in the override_dh_fixperms
  stanza
<-->dh_fixperms
<-->chmod +x debian/ledgersmb-1.5/usr/share/ledgersmb-1.5/sql/modules/reload_modules.sh
<-->chmod +x debian/ledgersmb-1.5/usr/share/ledgersmb-1.5/tools/dbsetup.pl
<-->chmod +x debian/ledgersmb-1.5/usr/share/ledgersmb-1.5/tools/drop-roles.pl
<-->chmod +x debian/ledgersmb-1.5/usr/share/ledgersmb-1.5/tools/install_interactive.pl
<-->chmod +x debian/ledgersmb-1.5/usr/share/ledgersmb-1.5/tools/pre-release-tests.sh
<-->chmod +x debian/ledgersmb-1.5/usr/share/ledgersmb-1.5/tools/starman.psgi
<-->chmod +x debian/ledgersmb-1.5/usr/share/ledgersmb-1.5/utils/notify_short/config.pl
<-->chmod +x debian/ledgersmb-1.5/usr/share/ledgersmb-1.5/utils/notify_short/listener.pl
<-->chmod +x debian/ledgersmb-1.5/usr/share/ledgersmb-1.5/utils/process_queue/config.pl.default
<-->chmod +x debian/ledgersmb-1.5/usr/share/ledgersmb-1.5/utils/process_queue/process_queue.pl
<-->chmod +x debian/ledgersmb-1.5/usr/share/ledgersmb-1.5/utils/replication/configure-replication.sh
<-->chmod -x debian/ledgersmb-1.5/usr/share/ledgersmb-1.5/locale/html/splash.html
<-->chmod -x debian/ledgersmb-1.5/usr/share/ledgersmb-1.5/lib/LedgerSMB/Template/TXT.pm
<-->chmod -x debian/ledgersmb-1.5/usr/share/ledgersmb-1.5/lib/LedgerSMB/Template/HTML.pm
<-->chmod -x debian/ledgersmb-1.5/usr/share/ledgersmb-1.5/lib/LedgerSMB/Template/CSV.pm
<-->chmod -x debian/ledgersmb-1.5/usr/share/ledgersmb-1.5/lib/LedgerSMB/Template/LaTeX.pm

---------------------------------------------------------------------------------------------------

https://github.com/ledgersmb/LedgerSMB/issues/2900
Although Debian (and others) do now use systemd by default, it does still support sysvinit
init.d scripts as well, so providing at least an example init.d sysvinit startup script
 for starman-ledgersmb would be quite useful.

	- In the mean time, added an initial version of a possible script:
In order to test how that works, would have to use something that has been
changed to use sysv instead of systemd.

---------------------------------------------------------------------------------------------------
- lintian results from pkg build for 0~1 test build on 1 Jul 2017

I: ledgersmb-1.5 source: no-complete-debconf-translation
- Ref - https://lintian.debian.org/tags/no-complete-debconf-translation.html

---------------------------------------------------------------------------------------------------
	- found during June test build
I: ledgersmb-1.5: systemd-service-file-missing-documentation-key lib/systemd/system/ledgersmb-1.5.service

-------------------------------------------------------------------------------
  - debian/adm/conmfig-lsmb-db-user.sh
- Use 'pg_roles' and 'rolname' rather than 'pg_users' and 'usename', as I 
found that one can actually create two roles with the same name, one with the
login attribute and one without.
- Use only the postgresql tools, like createuser, to set the user name and 
password for the LSMB DB Admin user.  David G pointed out that using SQL
can allow the unencrypted password to prehaps show up in logs, etc, which
is a security concern.
- Take out defaulting for doing the SQL 'ALTER' instead of a 'CREATE'
if the LSMB DBAdmin user already exits.  It was pointed out by both David
and Erik that they really don't think it's a good idea to reset that password
by default when, for instance, upgradeing the package;  which is what it did
if doing the configure was enabled.  Add option to reset the password if the
user ID already exists, but not by default; would have to explicitly agree
to it, each time, and that agreement isn't saved so the question gets asked
each time and by default is not to do the reset.


-----------------------------------------------------------------------------------

  - for v1.5: Install copy of 'ledgersmb.conf.default' as 'ledgersmb.conf'?
  instead of copying it  And installing a sym link?

ehuelsmann
jame_mx: regarding 1.5.0 and its packaging:
we support an enviornment variable now which allows selection of an alternative path for 'ledgersmb.conf'
if you set LSMB_CONFIG_FILE in the systemd service file,
you can use any location which is "debian compliant"
e.g. something in /etc.
08:34
Options

- Add to patch for the service file setting the environment for that variable?

  -----------------------------------------------------------------------------------

Update debian/Readme.Debian as necessary.
Update debian/Readme.sources as necessary.

-----------------------------------------------------------------------------------
  - Update d/copyright regarding UI/js as necessary.

-----------------------------------------------------------------------------------

- App::LedgerSMB::DBAdmin was still needed for it's library functions, even though
 it's an app not just a module.
-->> but Erik is importing what's needed from it into LSMB proper so will be able
to remove the depends for it then.

	- 6 Jun 2016
- Emailed the ITP for packaging App::LedgerSMB::Admin that upstream has removed
the requriement for the module, citing the upstream commit that did it, and
advising that the ITP would be closed when the change appeared in a release.

-----------------------------------------------------------------------------------
  - Use a separate source tarball for the UI/js directories?  Devs have discussed
it some but nothing has come of it as yet. If it's provided, then a way to bypass
all (330) source-is-missing lintian errors could be to use the multiple upstream
tarballs functionality that's available in the debian pkg format being used.

https://wiki.debian.org/Projects/DebSrc3.0
https://raphaelhertzog.com/2010/09/07/how-to-use-multiple-upstream-tarballs-in-debian-source-packages/  

google search: debian package multiple source files

-----------------------------------------------------------------------------------

- A debian/po debconf Japanese translation has been provided. Currently,
there is no LSMB locale/po/ja.po file. Checked System|Lanaguage|List
Languages in LSMB 1.3.40: "ja" is not in the default list. It's also not
listed as an available language when editing templates, and presumably
those lists come from the same source. It can be added manually using
System|Language|Add Language. 
-----------------------------------------------------------------------------------

- Upstream uses pdflatex to create the distribution LedgerSMB-manual.pdf from
the source file doc/manual/LedgerSMB-manual.tex. Use the same source file to
create an HTML version?

- Create an HTML and/or PDF file of templateing/templating-guide.tex? And
then register it with doc-base?

-----------------------------------------------------------------------------------

 -- Robert James Clay <jame@rocasa.us>  Sat,  1 Jul 2017 23:23 -0400
