<?lsmb INCLUDE 'ui-header.html' titlebar = text("Income Statement")
                include_script = ['UI/Reports/filters/dynamic_report_fields.js']
                include_stylesheet = [ "UI/Reports/filter.css" ];
       PROCESS 'elements.html';
       PROCESS 'report_base.html'; ?>
<body onLoad="init_income_statement()" class="<?lsmb dojo_theme ?>">
<div class="listtop"><?lsmb text('Income Statement') ?></div>
<form data-dojo-type="lsmb/lib/Form" action="pnl.pl" method="get">
<div class="input_row">
<?lsmb
PROCESS input element_data = {
     name = 'pnl_type',
     type = 'hidden',
    value = pnl_type
};
?></div>
  
<div class="input_row">
  <div class="label">
    <?lsmb text('Method') ?>
  </div>

  <div class="input_group">
<?lsmb
PROCESS input element_data={
  name = 'basis',
  type = 'radio',
  value = 'accrual',
  label = text('Accrual'),
  checked = 'checked',
  };
PROCESS input element_data={
  name = 'basis',
  type = 'radio',
  value = 'cash',
  label = text('Cash'),
  };
?></div>
</div>
<div class="input_row">
  <div class="label">
    <?lsmb text('Ignore Year-ends') ?>
  </div>

  <div class="input_group">
<?lsmb
PROCESS select element_data = {
     options = [
         {
             label="All",
             id="all",
         },
         {
             label="Last Only",
             id="last"
         },
         {
             label="None",
             id="none",
         }
     ],
     default_values = [report.ignore_yearend],
     name = 'ignore_yearend',
     text_attr = 'label',
     value_attr = 'id',
     }
?></div>
</div>
<div class="input_row">
<?lsmb
PROCESS input element_data = {
   label = text('GIFI')
    name = 'gifi'
   value = 1
    type = 'checkbox'
};
?></div>
<div class="input_row">
<?lsmb
PROCESS input element_data = {
   label = text('Account numbers')    #'
    name = 'incl_accnos'
    type = 'checkbox'
   value = 1
 checked = 'checked' # checked by default
};
?></div>
<div class="input_row">
<?lsmb text('Hierarchy type') ?>
<?lsmb
HIERARCHY_SETUP = earn_id;
IF HIERARCHY_SETUP;
    full_checked = 'CHECKED';
    full_disabled = undef;
    legacy_checked = undef;
ELSE;
    full_disabled = 'DISABLED';
    full_checked = undef;
    legacy_checked = 'CHECKED';
END;
PROCESS input element_data = {
   label = text('Full')
    type = 'radio'
    name = 'legacy_hierarchy'
   value = 0
      id = 'legacy-hierarchy-0'
 checked = full_checked
disabled = full_disabled
};

PROCESS input element_data = {
   label = text('Account category')
    type = 'radio'
    name = 'legacy_hierarchy'
   value = 1
      id = 'legacy-hierarchy-1'
 checked = legacy_checked
};
?>
</div>
<?lsmb IF full_disabled ?>
<div class="setupwarning" id="warning-hierarchy-not-setup">
  <a href="http://ledgersmb.org/topic/using-account-hierarchies-reporting" target='_blank'><?lsmb text('Not set up for hierarchy reporting, please see linked instructions') ?></a>
</div>
<?lsmb END ?>

<div class="subsection">
<?lsmb
PROCESS select element_data = {
         label = text('Language')
          name = 'language'
       options = languages
     text_attr = 'description'
    value_attr = 'code'
default_values = [USER.language]
}
?>
</div>

<div class="subsection">
<div class="labelledinput">
        <div class="label">
                <?lsmb text('Comparison selection by') ?>
        </div>
        <div class="input_group">
                <?lsmb
                IF comparison_type != 'by_dates';
                  YES="CHECKED";
                  NO=undef;
                ELSE;
                  NO="CHECKED";
                  YES=undef;
                END;
                PROCESS input element_data={
                        type = 'radio',
                        name = 'comparison_type',
                          id = 'comparison_by_periods',
                   value = 'by_periods',
                   label = text('Periods'),
                 checked = YES,
                };
                PROCESS input element_data={
                        type = 'radio',
                        name = 'comparison_type',
                          id = 'comparison_by_dates',
                   value = 'by_dates',
                   label = text('Dates'),
                 checked = NO
                };
                ?>
        </div>
</div>

<div class="input_row"><?lsmb
PROCESS input element_data = {
         label = text('Comparison Periods')
          name = 'comparison_periods'
     text_attr = 'description'
    value_attr = 'text'
         value = comparison_periods
          size = '3'
default_values = 0
};
PROCESS business_classes;
?>
<div class="input_row"><?lsmb
PROCESS date_from_date_div;
?>
<div id="date_to_date_id">
   <?lsmb PROCESS date_to_date_div; ?>
</div>
</div>
<div id="date_period_id">
   <?lsmb PROCESS date_period_div; ?>
</div>

<div class="subsection">
   <div id="comparison_dates" style="display:none">
       <h3><?lsmb text('Enter up to ')?> <span id="comparison_periods_text"><?lsmb comparison_periods ?></span><?lsmb text(' date ranges for comparison') ?></h3>
       <div class="input_row">
                   <?lsmb FOREACH c IN [1 .. 9]; ?>
                          <div id="comparison_dates_<?lsmb c ?>" style="<?lsmb c <= comparison_periods ? '' : 'display:none'?>">
                                          <?lsmb PROCESS date_from_date_div SUFFIX='_' _ c; ?>
                                          <?lsmb PROCESS date_to_date_div SUFFIX='_' _ c; ?>
                          </div>
                   <?lsmb END ?>
       </div>
   </div>
</div>
</div>

<div class="subsection">
<?lsmb
PROCESS button element_data = {
    text = text('Continue')
    name = 'action'
   value = 'generate_income_statement'
    type = 'submit'
   class = 'submit'
} ?>
</div>
</div>
</form>
</body>
</html>
