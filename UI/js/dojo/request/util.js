//>>built
define("dojo/request/util",["exports","../errors/RequestError","../errors/CancelError","../Deferred","../io-query","../_base/array","../_base/lang","../promise/Promise","../has"],function(e,a,t,r,i,d,l,o,n){function m(e){return f(e)}function s(e){return void 0!==e.data?e.data:e.text}e.deepCopy=function(a,t){for(var r in t){var i=a[r],d=t[r];i!==d&&(!d||"object"!=typeof d||n("native-formdata")&&d instanceof FormData?a[r]=d:"[object Date]"===Object.prototype.toString.call(d)?a[r]=new Date(d):l.isArray(d)?a[r]=e.deepCopyArray(d):i&&"object"==typeof i?e.deepCopy(i,d):a[r]=e.deepCopy({},d))}return a},e.deepCopyArray=function(a){var t=[];return a.forEach(function(a){t.push("object"==typeof a?e.deepCopy({},a):a)}),t},e.deepCreate=function(a,t){t=t||{};var r,i,d=l.delegate(a);for(r in a)i=a[r],i&&"object"==typeof i&&(d[r]=e.deepCreate(i,t[r]));return e.deepCopy(d,t)};var f=Object.freeze||function(e){return e};e.deferred=function(i,d,n,y,u,M){function v(e){throw e.response=i,e}var h=new r(function(e){return d&&d(h,i),e&&(e instanceof a||e instanceof t)?e:new t("Request canceled",i)});h.response=i,h.isValid=n,h.isReady=y,h.handleResponse=u;var c=h.then(m).otherwise(v);e.notify&&c.then(l.hitch(e.notify,"emit","load"),l.hitch(e.notify,"emit","error"));var g=c.then(s),p=new o;for(var b in g)g.hasOwnProperty(b)&&(p[b]=g[b]);return p.response=c,f(p),M&&h.then(function(e){M.call(h,e)},function(e){M.call(h,i,e)}),h.promise=p,h.then=p.then,h},e.addCommonMethods=function(e,a){d.forEach(a||["GET","POST","PUT","DELETE"],function(a){e[("DELETE"===a?"DEL":a).toLowerCase()]=function(t,r){return r=l.delegate(r||{}),r.method=a,e(t,r)}})},e.parseArgs=function(e,a,t){var r=a.data,d=a.query;return r&&!t&&("object"!=typeof r||n("native-xhr2")&&(r instanceof ArrayBuffer||r instanceof Blob)||(a.data=i.objectToQuery(r))),d?("object"==typeof d&&(d=i.objectToQuery(d)),a.preventCache&&(d+=(d?"&":"")+"request.preventCache="+ +new Date)):a.preventCache&&(d="request.preventCache="+ +new Date),e&&d&&(e+=(~e.indexOf("?")?"&":"?")+d),{url:e,options:a,getHeader:function(){return null}}},e.checkStatus=function(e){return e=e||0,e>=200&&300>e||304===e||1223===e||!e}});//# sourceMappingURL=util.js.map