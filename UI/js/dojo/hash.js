//>>built
define("dojo/hash",["./_base/kernel","require","./_base/config","./aspect","./_base/lang","./topic","./domReady","./sniff"],function(e,t,n,r,o,i,a,s){function c(e,t){var n=e.indexOf(t);return n>=0?e.substring(n+1):""}function u(){return c(location.href,"#")}function d(){i.publish("/dojo/hashchange",u())}function l(){u()!==p&&(p=u(),d())}function f(e){if(m){if(m.isTransitioning())return void setTimeout(o.hitch(null,f,e),v);var t=m.iframe.location.href,n=t.indexOf("?");return void m.iframe.location.replace(t.substring(0,n)+"?"+e)}var t=location.href.replace(/#.*/,"");location.replace(t+"#"+e),!g&&l()}function h(){function r(){p=u(),l=g?p:c(y.href,"?"),f=!1,h=null}var i=document.createElement("iframe"),a="dojo-hash-iframe",s=n.dojoBlankHtmlUrl||t.toUrl("./resources/blank.html");n.useXDomain&&!n.dojoBlankHtmlUrl,i.id=a,i.src=s+"?"+u(),i.style.display="none",document.body.appendChild(i),this.iframe=e.global[a];var l,f,h,m,g,y=this.iframe.location;this.isTransitioning=function(){return f},this.pollLocation=function(){if(!g)try{var e=c(y.href,"?");document.title!=m&&(m=this.iframe.document.title=document.title)}catch(t){g=!0,console.error("dojo/hash: Error adding history entry. Server unreachable.")}var n=u();if(f&&p===n){if(!g&&e!==h)return void setTimeout(o.hitch(this,this.pollLocation),0);r(),d()}else if(p!==n||!g&&l!==e){if(p!==n)return p=n,f=!0,h=n,i.src=s+"?"+h,g=!1,void setTimeout(o.hitch(this,this.pollLocation),0);g||(location.href="#"+y.search.substring(1),r(),d())}else;setTimeout(o.hitch(this,this.pollLocation),v)},r(),setTimeout(o.hitch(this,this.pollLocation),v)}e.hash=function(e,t){return arguments.length?("#"==e.charAt(0)&&(e=e.substring(1)),t?f(e):location.hash="#"+e,e):u()};var p,m,g,v=n.hashPollFrequency||100;return a(function(){"onhashchange"in e.global&&(!s("ie")||s("ie")>=8&&"BackCompat"!=document.compatMode)?g=r.after(e.global,"onhashchange",d,!0):document.addEventListener?(p=u(),setInterval(l,v)):document.attachEvent&&(m=new h)}),e.hash});//# sourceMappingURL=hash.js.map