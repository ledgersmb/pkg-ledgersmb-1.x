//>>built
define("dojo/number",["./_base/lang","./i18n","./i18n!./cldr/nls/number","./string","./regexp"],function(e,t,n,r,o){var i={};if(e.setObject("dojo.number",i),i.format=function(n,r){r=e.mixin({},r||{});var o=t.normalizeLocale(r.locale),a=t.getLocalization("dojo.cldr","number",o);r.customs=a;var s=r.pattern||a[(r.type||"decimal")+"Format"];return isNaN(n)||1/0==Math.abs(n)?null:i._applyPattern(n,s,r)},i._numberPatternRE=/[#0,]*[#0](?:\.0*#*)?/,i._applyPattern=function(e,t,n){n=n||{};var r=n.customs.group,o=n.customs.decimal,a=t.split(";"),s=a[0];if(t=a[0>e?1:0]||"-"+s,-1!=t.indexOf("%"))e*=100;else if(-1!=t.indexOf("‰"))e*=1e3;else if(-1!=t.indexOf("¤"))r=n.customs.currencyGroup||r,o=n.customs.currencyDecimal||o,t=t.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/,function(e,t,r,o){var i=["symbol","currency","displayName"][r.length-1],a=n[i]||n.currency||"";return a?t+a+o:""});else if(-1!=t.indexOf("E"))throw new Error("exponential notation not supported");var u=i._numberPatternRE,c=s.match(u);if(!c)throw new Error("unable to find a number expression in pattern: "+t);return n.fractional===!1&&(n.places=0),t.replace(u,i._formatAbsolute(e,c[0],{decimal:o,group:r,places:n.places,round:n.round}))},i.round=function(e,t,n){var r=10/(n||10);return(r*+e).toFixed(t)/r},0==.9.toFixed()){var a=i.round;i.round=function(e,t,n){var r=Math.pow(10,-t||0),o=Math.abs(e);return!e||o>=r?r=0:(o/=r,(.5>o||o>=.95)&&(r=0)),a(e,t,n)+(e>0?r:-r)}}return i._formatAbsolute=function(e,t,n){n=n||{},n.places===!0&&(n.places=0),1/0===n.places&&(n.places=6);var o=t.split("."),a="string"==typeof n.places&&n.places.indexOf(","),s=n.places;a?s=n.places.substring(a+1):s>=0||(s=(o[1]||[]).length),n.round<0||(e=i.round(e,s,n.round));var u=String(Math.abs(e)).split("."),c=u[1]||"";if(o[1]||n.places){a&&(n.places=n.places.substring(0,a));var d=void 0!==n.places?n.places:o[1]&&o[1].lastIndexOf("0")+1;d>c.length&&(u[1]=r.pad(c,d,"0",!0)),s<c.length&&(u[1]=c.substr(0,s))}else u[1]&&u.pop();var l=o[0].replace(",","");d=l.indexOf("0"),-1!=d&&(d=l.length-d,d>u[0].length&&(u[0]=r.pad(u[0],d)),-1==l.indexOf("#")&&(u[0]=u[0].substr(u[0].length-d)));var f,h,p=o[0].lastIndexOf(",");if(-1!=p){f=o[0].length-p-1;var g=o[0].substr(0,p);p=g.lastIndexOf(","),-1!=p&&(h=g.length-p-1)}for(var m=[],v=u[0];v;){var y=v.length-f;m.push(y>0?v.substr(y):v),v=y>0?v.slice(0,y):"",h&&(f=h,h=void 0)}return u[0]=m.reverse().join(n.group||","),u.join(n.decimal||".")},i.regexp=function(e){return i._parseInfo(e).regexp},i._parseInfo=function(e){e=e||{};var n=t.normalizeLocale(e.locale),r=t.getLocalization("dojo.cldr","number",n),a=e.pattern||r[(e.type||"decimal")+"Format"],s=r.group,u=r.decimal,c=1;if(-1!=a.indexOf("%"))c/=100;else if(-1!=a.indexOf("‰"))c/=1e3;else{var d=-1!=a.indexOf("¤");d&&(s=r.currencyGroup||s,u=r.currencyDecimal||u)}var l=a.split(";");1==l.length&&l.push("-"+l[0]);var f=o.buildGroupRE(l,function(t){return t="(?:"+o.escapeString(t,".")+")",t.replace(i._numberPatternRE,function(t){var n={signed:!1,separator:e.strict?s:[s,""],fractional:e.fractional,decimal:u,exponent:!1},r=t.split("."),o=e.places;1==r.length&&1!=c&&(r[1]="###"),1==r.length||0===o?n.fractional=!1:(void 0===o&&(o=e.pattern?r[1].lastIndexOf("0")+1:1/0),o&&void 0==e.fractional&&(n.fractional=!0),!e.places&&o<r[1].length&&(o+=","+r[1].length),n.places=o);var a=r[0].split(",");return a.length>1&&(n.groupSize=a.pop().length,a.length>1&&(n.groupSize2=a.pop().length)),"("+i._realNumberRegexp(n)+")"})},!0);return d&&(f=f.replace(/([\s\xa0]*)(\u00a4{1,3})([\s\xa0]*)/g,function(t,n,r,i){var a=["symbol","currency","displayName"][r.length-1],s=o.escapeString(e[a]||e.currency||"");return s?(n=n?"[\\s\\xa0]":"",i=i?"[\\s\\xa0]":"",e.strict?n+s+i:(n&&(n+="*"),i&&(i+="*"),"(?:"+n+s+i+")?")):""})),{regexp:f.replace(/[\xa0 ]/g,"[\\s\\xa0]"),group:s,decimal:u,factor:c}},i.parse=function(e,t){var n=i._parseInfo(t),r=new RegExp("^"+n.regexp+"$").exec(e);if(!r)return 0/0;var o=r[1];if(!r[1]){if(!r[2])return 0/0;o=r[2],n.factor*=-1}return o=o.replace(new RegExp("["+n.group+"\\s\\xa0]","g"),"").replace(n.decimal,"."),o*n.factor},i._realNumberRegexp=function(e){e=e||{},"places"in e||(e.places=1/0),"string"!=typeof e.decimal&&(e.decimal="."),"fractional"in e&&!/^0/.test(e.places)||(e.fractional=[!0,!1]),"exponent"in e||(e.exponent=[!0,!1]),"eSigned"in e||(e.eSigned=[!0,!1]);var t=i._integerRegexp(e),n=o.buildGroupRE(e.fractional,function(t){var n="";return t&&0!==e.places&&(n="\\"+e.decimal,1/0==e.places?n="(?:"+n+"\\d+)?":n+="\\d{"+e.places+"}"),n},!0),r=o.buildGroupRE(e.exponent,function(t){return t?"([eE]"+i._integerRegexp({signed:e.eSigned})+")":""}),a=t+n;return n&&(a="(?:(?:"+a+")|(?:"+n+"))"),a+r},i._integerRegexp=function(e){e=e||{},"signed"in e||(e.signed=[!0,!1]),"separator"in e?"groupSize"in e||(e.groupSize=3):e.separator="";var t=o.buildGroupRE(e.signed,function(e){return e?"[-+]":""},!0),n=o.buildGroupRE(e.separator,function(t){if(!t)return"(?:\\d+)";t=o.escapeString(t)," "==t?t="\\s":" "==t&&(t="\\s\\xa0");var n=e.groupSize,r=e.groupSize2;if(r){var i="(?:0|[1-9]\\d{0,"+(r-1)+"}(?:["+t+"]\\d{"+r+"})*["+t+"]\\d{"+n+"})";return n-r>0?"(?:"+i+"|(?:0|[1-9]\\d{0,"+(n-1)+"}))":i}return"(?:0|[1-9]\\d{0,"+(n-1)+"}(?:["+t+"]\\d{"+n+"})*)"},!0);return t+n},i});//# sourceMappingURL=number.js.map